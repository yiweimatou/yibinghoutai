webpackJsonp([4],{17:function(e,t,u){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=u(34),a=n(r),F=u(20),i=n(F),o=u(22),d=n(o),l=function(e){var t=e.touched,u=e.error,n=(0,d["default"])(e,["touched","error"]),r=arguments.length<=1||void 0===arguments[1]?"errorText":arguments[1];return t&&u?(0,i["default"])({},n,(0,a["default"])({},r,u)):n};t["default"]=l},21:function(e,t,u){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=u(1),a=u(17),F=n(a),i=u(13);t["default"]=function(e){return(0,r.createElement)(i.TextField,(0,F["default"])(e))}},22:function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){var u={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(u[n]=e[n]);return u}},39:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=t.isNullOrEmpty=function(e){return""===e&&null===e&&void 0===e},n=t.matchRegexp=function(e,t){return u(e)||t.test(e)};t.isUrl=function(e){return n(e,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},t.isEmail=function(e){return n(e,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},t.isMobile=function(e){return n(e,/^(13\d|15[^4,\D]|17[13678]|18\d)\d{8}|170[^346,\D]\d{7}$/)},t.isWords=function(e){return n(e,/^[A-Z\s]+$/i)},t.isNumeric=function(e){return"number"==typeof e?!0:n(e,/^[-+]?(?:\d*[.])?\d+$/)}},83:function(e,t,u){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=u(20),a=n(r),F=u(1),i=u(126),o=n(i),d=u(17),l=n(d);t["default"]=function(e){return(0,F.createElement)(o["default"],(0,a["default"])({},(0,l["default"])(e),{onChange:function(t,u,n){return e.onChange(n)}}))}},154:function(e,t,u){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.uploadLogo=t.uploadCover=void 0;var r=u(47),a=u(93),F=n(a),i=u(29);t.uploadCover=function(e){var t=new FormData;return t.append("upload_file",e),(0,F["default"])(r.UPLOAD_COVER_API,{method:"POST",body:t}).then(function(e){if(e.ok)return e.json();throw new Error(e.statusText)}).then(function(e){if(e.code===r.OK)return e.cover;throw new Error(e.msg)})["catch"](function(e){i.toastr.error(e.message)})},t.uploadLogo=function(e){var t=new FormData;return t.append("upload_file",e),(0,F["default"])(r.UPLOAD_LOGO_API,{method:"POST",body:t}).then(function(e){if(e.ok)return e.json();throw new Error(e.statusText)}).then(function(e){if(e.code===r.OK)return e.logo;throw new Error(e.msg)})["catch"](function(e){i.toastr.error(e.message)})}},155:function(e,t,u){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=u(11),a=n(r),F=u(85),i=n(F),o=u(86),d=n(o),l=u(87),f=n(l),s=u(89),c=n(s),m=u(88),D=n(m),p=u(1),h=n(p),x={div:{textAlign:"center",margin:"5px 15px",height:200,width:500,borderLeft:"1px solid gray",borderRight:"1px solid gray",borderTop:"5px solid gray",borderBottom:"5px solid gray"},img:{height:200,width:500},text:{width:"100%",marginTop:20},input:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}},v=function(e){function t(){var e,u,n,r;(0,d["default"])(this,t);for(var a=arguments.length,F=Array(a),o=0;a>o;o++)F[o]=arguments[o];return u=n=(0,c["default"])(this,(e=(0,i["default"])(t)).call.apply(e,[this].concat(F))),n.state={imagePreviewUrl:n.props.url,file:null},r=u,(0,c["default"])(n,r)}return(0,D["default"])(t,e),(0,f["default"])(t,[{key:"handlerImgChange",value:function(e){var t=this;e.preventDefault();var u=new FileReader,n=e.target.files[0];u.onloadend=function(){t.setState({file:n,imagePreviewUrl:u.result})},u.readAsDataURL(n),this.props.onChange(n)}},{key:"handleClick",value:function(){document.querySelector("#_file").click()}},{key:"render",value:function(){var e=this,t=null;return t=this.state.imagePreviewUrl?(0,a["default"])("img",{src:this.state.imagePreviewUrl,width:"100%",height:"100%"}):(0,a["default"])("div",{style:x.text},void 0,"点击选择上传图片"),(0,a["default"])("div",{onClick:this.handleClick,style:x.div},void 0,(0,a["default"])("input",{id:"_file",type:"file",readOnly:!0,onChange:function(t){return e.handlerImgChange(t)},style:x.input}),(0,a["default"])("div",{style:x.img},void 0,t))}}]),t}(h["default"].Component);t["default"]=v},1370:function(e,t,u){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.handleSubmit,u=e.submitting,n=e.invalid,r=e.reset,a=e.onChange;return(0,F["default"])("form",{onSubmit:t,style:p.form},void 0,(0,F["default"])(D["default"],{onChange:a}),(0,F["default"])(o.Field,{name:"oname",type:"text",hintText:"机构名称",floatingLabelText:"机构名称",component:f["default"],style:p.item}),(0,F["default"])(o.Field,{name:"mobile",type:"text",hintText:"管理员手机号码",floatingLabelText:"管理员手机号码",component:f["default"],style:p.item}),(0,F["default"])(o.Field,{name:"state",component:c["default"],style:p.item,hintText:"机构状态",floatingLabelText:"机构状态"},void 0,h,x,v),(0,F["default"])(o.Field,{name:"category",component:c["default"],style:p.item,hintText:"机构类型",floatingLabelText:"机构类型"},void 0,g,y,_,b,C),(0,F["default"])(o.Field,{name:"descript",hintText:"机构简介",floatingLabelText:"机构简介",component:f["default"],multiLine:!0,rows:2,style:p.item}),(0,F["default"])("div",{style:p.submit},void 0,(0,F["default"])(d.RaisedButton,{type:"submit",label:"提交",primary:!0,disabled:u||n}),(0,F["default"])(d.RaisedButton,{label:"取消",onClick:r,style:p.margin})))}Object.defineProperty(t,"__esModule",{value:!0});var a=u(11),F=n(a),i=u(1),o=(n(i),u(16)),d=u(13),l=u(21),f=n(l),s=u(83),c=n(s),m=u(155),D=n(m),p={form:{display:"flex",flexFlow:"column wrap",alignItems:"center"},item:{width:"80%"},margin:{marginLeft:20},div:{display:"flex",alignItems:"flex-end",width:"80%"},submit:{display:"flex",width:"80%",flexFlow:"row wrap",marginTop:30},url:{marginLeft:20,flex:1},input:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}},h=(0,F["default"])(d.MenuItem,{value:1,primaryText:"正常"}),x=(0,F["default"])(d.MenuItem,{value:2,primaryText:"冻结"}),v=(0,F["default"])(d.MenuItem,{value:3,primaryText:"永久冻结"}),g=(0,F["default"])(d.MenuItem,{value:1,primaryText:"官方"}),y=(0,F["default"])(d.MenuItem,{value:2,primaryText:"医院"}),_=(0,F["default"])(d.MenuItem,{value:3,primaryText:"药企"}),b=(0,F["default"])(d.MenuItem,{value:4,primaryText:"学校"}),C=(0,F["default"])(d.MenuItem,{value:5,primaryText:"其他"});t["default"]=r},1382:function(e,t,u){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=u(40),a=n(r),F=u(16),i=u(47),o=u(1370),d=n(o),l=u(39),f=u(58),s=u(33),c=u(26),m=u(29),D=u(154),p=function(e){var t={};return e.oname||(t.oname="请填写机构名称"),e.state||(t.state="请选择机构状态"),e.mobile?(0,l.isMobile)(e.mobile)||(t.mobile="请填写正确的手机号码"):t.mobile="请填写管理员手机号码",e.category||(t.category="请选择机构类型"),t},h=function(e){return{onChange:function(t){e((0,F.change)("addOrganize","file",t))},onSubmit:function(t){return t.file?(0,D.uploadLogo)(t.file).then(function(u){delete t.file,t.logo=u,a["default"].resolve(e((0,s.get)({mobile:t.mobile}))).then(function(u){if(u.code===i.OK)return u.get.uid>0?u.get.uid:a["default"].resolve(e((0,s.add)({mobile:t.mobile,pwd:t.mobile}).then(function(e){if(e.identity>0)return e.identity;throw new Error("新建用户失败:"+e.msg)})));throw new Error(u.msg)}).then(function(u){if(!u)throw new Error("获取用户信息失败!");t.uid=u,e((0,f.add)(t))})["catch"](function(e){m.toastr.error(e.message)})}):m.toastr.error("请选择机构LOGO")}}};t["default"]=(0,c.connect)(null,h)((0,F.reduxForm)({form:"addOrganize",validate:p})(d["default"]))}});