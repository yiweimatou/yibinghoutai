webpackJsonp([3],{17:function(e,u,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(u,"__esModule",{value:!0});var F=t(34),i=n(F),r=t(20),o=n(r),a=t(22),d=n(a),l=function(e){var u=e.touched,t=e.error,n=(0,d["default"])(e,["touched","error"]),F=arguments.length<=1||void 0===arguments[1]?"errorText":arguments[1];return u&&t?(0,o["default"])({},n,(0,i["default"])({},F,t)):n};u["default"]=l},21:function(e,u,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(u,"__esModule",{value:!0});var F=t(1),i=t(17),r=n(i),o=t(13);u["default"]=function(e){return(0,F.createElement)(o.TextField,(0,r["default"])(e))}},22:function(e,u){"use strict";u.__esModule=!0,u["default"]=function(e,u){var t={};for(var n in e)u.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}},39:function(e,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var t=u.isNullOrEmpty=function(e){return""===e&&null===e&&void 0===e},n=u.matchRegexp=function(e,u){return t(e)||u.test(e)};u.isUrl=function(e){return n(e,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},u.isEmail=function(e){return n(e,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},u.isMobile=function(e){return n(e,/^(13\d|15[^4,\D]|17[13678]|18\d)\d{8}|170[^346,\D]\d{7}$/)},u.isWords=function(e){return n(e,/^[A-Z\s]+$/i)},u.isNumeric=function(e){return"number"==typeof e?!0:n(e,/^[-+]?(?:\d*[.])?\d+$/)}},83:function(e,u,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(u,"__esModule",{value:!0});var F=t(20),i=n(F),r=t(1),o=t(126),a=n(o),d=t(17),l=n(d);u["default"]=function(e){return(0,r.createElement)(a["default"],(0,i["default"])({},(0,l["default"])(e),{onChange:function(u,t,n){return e.onChange(n)}}))}},154:function(e,u,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(u,"__esModule",{value:!0}),u.uploadLogo=u.uploadCover=void 0;var F=t(47),i=t(93),r=n(i),o=t(29);u.uploadCover=function(e){var u=new FormData;return u.append("upload_file",e),(0,r["default"])(F.UPLOAD_COVER_API,{method:"POST",body:u}).then(function(e){if(e.ok)return e.json();throw new Error(e.statusText)}).then(function(e){if(e.code===F.OK)return e.cover;throw new Error(e.msg)})["catch"](function(e){o.toastr.error(e.message)})},u.uploadLogo=function(e){var u=new FormData;return u.append("upload_file",e),(0,r["default"])(F.UPLOAD_LOGO_API,{method:"POST",body:u}).then(function(e){if(e.ok)return e.json();throw new Error(e.statusText)}).then(function(e){if(e.code===F.OK)return e.logo;throw new Error(e.msg)})["catch"](function(e){o.toastr.error(e.message)})}},155:function(e,u,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(u,"__esModule",{value:!0});var F=t(11),i=n(F),r=t(85),o=n(r),a=t(86),d=n(a),l=t(87),f=n(l),s=t(89),c=n(s),m=t(88),D=n(m),h=t(1),p=n(h),x={div:{textAlign:"center",margin:"5px 15px",height:200,width:500,borderLeft:"1px solid gray",borderRight:"1px solid gray",borderTop:"5px solid gray",borderBottom:"5px solid gray"},img:{height:200,width:500},text:{width:"100%",marginTop:20},input:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}},g=function(e){function u(){var e,t,n,F;(0,d["default"])(this,u);for(var i=arguments.length,r=Array(i),a=0;i>a;a++)r[a]=arguments[a];return t=n=(0,c["default"])(this,(e=(0,o["default"])(u)).call.apply(e,[this].concat(r))),n.state={imagePreviewUrl:n.props.url,file:null},F=t,(0,c["default"])(n,F)}return(0,D["default"])(u,e),(0,f["default"])(u,[{key:"handlerImgChange",value:function(e){var u=this;e.preventDefault();var t=new FileReader,n=e.target.files[0];t.onloadend=function(){u.setState({file:n,imagePreviewUrl:t.result})},t.readAsDataURL(n),this.props.onChange(n)}},{key:"handleClick",value:function(){document.querySelector("#_file").click()}},{key:"render",value:function(){var e=this,u=null;return u=this.state.imagePreviewUrl?(0,i["default"])("img",{src:this.state.imagePreviewUrl,width:"100%",height:"100%"}):(0,i["default"])("div",{style:x.text},void 0,"点击选择上传图片"),(0,i["default"])("div",{onClick:this.handleClick,style:x.div},void 0,(0,i["default"])("input",{id:"_file",type:"file",readOnly:!0,onChange:function(u){return e.handlerImgChange(u)},style:x.input}),(0,i["default"])("div",{style:x.img},void 0,u))}}]),u}(p["default"].Component);u["default"]=g},1372:function(e,u,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function F(e){var u=e.handleSubmit,t=e.submitting,n=e.invalid,F=e.onChange,i=e.organize;return i?(0,r["default"])("form",{onSubmit:u,style:h.form},void 0,(0,r["default"])(D["default"],{onChange:F,url:i.logo}),(0,r["default"])(a.Field,{name:"oname",hintText:"机构名称",floatingLabelText:"机构名称",component:f["default"],style:h.item}),(0,r["default"])(a.Field,{name:"state",component:c["default"],style:h.item,hintText:"机构状态",floatingLabelText:"机构状态"},void 0,p,x,g),(0,r["default"])(a.Field,{name:"mobile",component:f["default"],hintText:"机构管理员手机号",floatingLabelText:"机构管理员手机号",style:h.item}),(0,r["default"])(a.Field,{name:"descript",hintText:"机构简介",floatingLabelText:"机构简介",component:f["default"],multiLine:!0,rows:3,style:h.item}),(0,r["default"])("div",{style:h.submit},void 0,(0,r["default"])(d.RaisedButton,{type:"submit",label:"提交",primary:!0,disabled:t||n}))):null}Object.defineProperty(u,"__esModule",{value:!0});var i=t(11),r=n(i),o=t(1),a=(n(o),t(16)),d=t(13),l=t(21),f=n(l),s=t(83),c=n(s),m=t(155),D=n(m),h={form:{display:"flex",flexFlow:"column wrap",alignItems:"center"},item:{width:"80%"},margin:{marginLeft:20},div:{display:"flex",width:"80%"},submit:{display:"flex",width:"80%",flexFlow:"row wrap",marginTop:30},url:{marginLeft:20,flex:1},input:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}},p=(0,r["default"])(d.MenuItem,{value:1,primaryText:"正常"}),x=(0,r["default"])(d.MenuItem,{value:2,primaryText:"冻结"}),g=(0,r["default"])(d.MenuItem,{value:3,primaryText:"永久冻结"});u["default"]=F},1384:function(e,u,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(u,"__esModule",{value:!0});var F=t(40),i=n(F),r=t(16),o=t(1372),a=n(o),d=t(58),l=t(154),f=t(39),s=t(26),c=t(33),m=function(e){var u={};return e.oname||(u.oname="请填写机构名称"),e.state||(u.state="请选择机构状态"),e.mobile?(0,f.isMobile)(e.mobile)||(u.mobile="请输入正确的手机号码"):u.mobile="请输入管理员手机号",u},D=function(e){return{organize:e.organize.detail}},h=function(e){return{onChange:function(u){e((0,r.change)("editOrganize","file",u))}}},p=function(e,u){var t={oid:e.oid,oname:e.oname,state:e.state,descript:e.descript,logo:e.logo};return new i["default"](function(n){u((0,c.getUserIfNeeded)({mobile:e.mobile})).then(function(t){return t?t.uid:u((0,c.add)({mobile:e.mobile,pwd:e.mobile})).then(function(e){if(200===e.code&&e.identity)return e.identity;throw new Error("创建用户失败")})}).then(function(F){return F?(t.uid=F,void(e.file?(0,l.uploadLogo)(e.file).then(function(e){t.logo=e,n(u((0,d.edit)(t)))}):n(u((0,d.edit)(t))))):n()})["catch"](function(e){n(e.message)})})};u["default"]=(0,s.connect)(D,h)((0,r.reduxForm)({form:"editOrganize",validate:m,onSubmit:p})(a["default"]))}});